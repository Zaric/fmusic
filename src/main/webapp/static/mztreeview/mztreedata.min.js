function MzData(){System.call(this)}t=MzData.Extends(System,"MzData");MzData.addProperty("__","\x0f",Function.READ);t.rootId="-1";t.dividerEncoding=t.divider="_";t.indexes=t.jsDataPath=t.xmlDataPath="";t.appendIndexes=function(a){this.indexes+=this.get__()+a+this.get__()};t.getUniqueId=function(){return"MzData"+(MzData.nodeCounter++).toString(36)};MzData.nodeCounter=0;window.MzDataNode=function(){this.index=(MzData.nodeCounter++).toString(36);this.childNodes=[]};t.nodePrototype=MzDataNode;t=MzDataNode.Extends(System,"MzDataNode");t.text=t.path=t.sourceIndex="";t.isLoaded=t.hasChild=false;t.parentNode=t.$$caller=null;MzData.prototype.setDivider=function(e){this.divider=e;for(var b="",c=0;c<e.length;c++){b+=("'^{[(\\-|+.*?)]}$\"".indexOf(e.charAt(c))>-1?"\\":"")+e.charAt(c)}this.dividerEncoding=b};MzData.prototype.setJsDataPath=function(a){if(a.length>0){this.jsDataPath=a.replace(/[\\\/]*$/,"/")}};MzData.prototype.setXmlDataPath=function(a){if(a.length>0){this.xmlDataPath=a.replace(/[\\\/]*$/,"/")}};MzData.prototype.initialize=function(){this.selectedNode=null;this.currentNode=null;if("object"!=typeof this.nodes){this.nodes={}}if("object"!=typeof this.dataSource){this.dataSource={}}var c=this.get__(),g=this.dividerEncoding,b=[],e;for(e in this.dataSource){b[b.length]=e}this.appendIndexes(b.join(c));this.dataSource.length=(this.dataSource.length||0)+b.length;b=(MzData.nodeCounter++).toString(36);var f=this.nodes[b]=this.rootNode=new this.nodePrototype;f.$$caller=this;f.index=b;f.virgin=this.rootId=="-1";if(f.virgin){f.id=f.path="-1";f.loadChildNodes();f.hasChildNodes()}else{b=new RegExp("([^"+c+g+"]+)"+g+"("+this.rootId+")("+c+"|$)");if(b.test(this.indexes)){b=RegExp.$1+this.divider+this.rootId;f.childNodes[0]=f.DTO(this.nodePrototype,b);f.isLoaded=true;f.hasChild=true}}this._initialized=true};MzData.prototype.appendData=function(c){if("object"!=typeof this.dataSource){this.dataSource={}}var b=[],d;for(d in c){if(!this.dataSource[d]){this.dataSource[d]=c[d];b[b.length]=d}}if(this._initialized){this.appendIndexes(b.join(this.get__()))
}this.dataSource.length=(this.dataSource.length||0)+b.length;c=null;b=null};MzData.prototype.getNodeById=function(f){if(f==this.rootId&&this.rootNode.virgin){return this.rootNode}var a=this.get__(),e=this.dividerEncoding;var c=new RegExp("([^"+a+e+"]+"+e+f+")("+a+"|$)");if(c.test(this.indexes)){var b=RegExp.$1;if(b=this.dataSource[b].getAttribute("index_"+this.hashCode)){return this.nodes[b]}else{return null}}return null};MzData.prototype.loadJsData=function(JsFileUrl){var js;if(js=System.load("",JsFileUrl)){try{var d=eval(js);if("object"!=d&&"object"==typeof(data)&&null!=data){d=data}this.appendData(d);data=d=null}catch(e){}}};MzData.prototype.loadXmlData=function(c,d){if(System.supportsXmlHttp()){function b(f){var e=new Date().getTime();while(true){if(new Date().getTime()-e>f){break}}}if("undefined"==typeof d){d=this.rootId}var a=new MzXmlDocument();a.async=false;a.load(c);if(a.readyState==4){if(!a.documentElement){alert("xmlDoc.documentElement = null, Please update your browser")}this._loadXmlNodeData(a.documentElement,d)}}};MzData.prototype.loadXmlDataString=function(b,c){if(System.supportsXmlHttp()){if("undefined"==typeof c){c=this.rootId}var a=new MzXmlDocument();a.loadXML(b);this._loadXmlNodeData(a.documentElement,c)}};MzData.prototype._loadXmlNodeData=function(j,g){if(!(j&&j.hasChildNodes())){return}for(var d,b,f=0,e={},c=j.childNodes;f<c.length;f++){if(c[f].nodeType==1){b=c[f].getAttribute("id")||this.getUniqueId();if(c[f].hasChildNodes()){for(d=0,nic=c[f].childNodes;d<nic.length;d++){if(nic[d].nodeType==1){this._loadXmlNodeData(c[f],b);break}}}for(var d=0,l="",h=c[f].attributes;d<h.length;d++){l=l.setAttribute(h[d].name,h[d].value)}if(!l.getAttribute("text")){l="text:;"+l}h=g+this.divider+b;e[h]=l}}this.appendData(e)};MzData.prototype.loadUlData=function(e,l){if("undefined"==typeof l){l=this.rootId}var m;if("string"==typeof e&&(m=document.getElementById(e))){}else{if("object"==typeof e&&(m=e.tagName)&&"UL OL".indexOf(m.toUpperCase())>-1){m=e}}if("object"==typeof m){var g={};for(var h=0,c=m.childNodes;h<c.length;
h++){if(c[h].nodeType==1&&c[h].tagName=="LI"){var b=c[h].getAttribute("sourceid")||this.getUniqueId(),j="",p="";for(var f=0;f<c[h].childNodes.length;f++){var d=c[h].childNodes[f];if(d.nodeType==3){j+=d.nodeValue}if(d.nodeType==1){switch(d.tagName){case"UL":case"OL":this.loadUlData(d,b);break;case"A":if(!p){p=d}break}}}var o="";if(p){o=o.setAttribute("target",p.target);o=o.setAttribute("url",p.href);o=o.setAttribute("text",p.innerHTML)}else{o=o.setAttribute("text",j.trim())}var q=c[h].attributes;for(var f=0;f<q.length;f++){if(q[f].specified&&q[f].name!="style"){o=o.setAttribute(q[f].name,q[f].value)}}q=l+this.divider+b;g[q]=o}}this.appendData(g)}};MzDataNode.prototype.hasChildNodes=function(){var a=this.$$caller;this.hasChild=a.indexes.indexOf(a.get__()+this.id+a.divider)>-1||(this.sourceIndex&&(this.get("JSData")!=null||this.get("XMLData")!=null||this.get("ULData")!=null));return this.hasChild};MzDataNode.prototype.get=function(a){if("undefined"!=typeof this[a]){return this[a]}else{return this.$$caller.dataSource[this.sourceIndex].getAttribute(a)}};MzDataNode.prototype.set=function(b,c){if(typeof(this[b])!="undefined"){this[b]=c}else{var a=this.$$caller.dataSource[this.sourceIndex];this.$$caller.dataSource[this.sourceIndex]=a.setAttribute(b,c)}};MzDataNode.prototype.loadChildNodes=function(c){var g=this.$$caller,f=g.dividerEncoding,a=g.get__(),b,e;var h=this.childNodes;h.length=0;if(this.sourceIndex){if((b=this.get("JSData"))){g.loadJsData((/^\w+\.js(\s|\?|$)/i.test(b)?g.jsDataPath:"")+b)}if((b=this.get("ULData"))){g.loadUlData(b,this.id)}if((b=this.get("XMLData"))){g.loadXmlData((/^\w+\.xml(\s|\?|$)/i.test(b)?g.xmlDataPath:"")+b,this.id)}}var d=new RegExp(a+this.id+f+"[^"+a+f+"]+","g");if((e=g.indexes.match(d))){for(b=0;b<e.length;b++){h[h.length]=this.DTO(c,e[b].substr(a.length))}}this.isLoaded=true};MzDataNode.prototype.DTO=function(b,a){var g=b||MzDataNode,e=this.$$caller,f=e.divider,h=new g,c;h.$$caller=this.$$caller;c=e.dataSource[h.sourceIndex=a];h.id=a.substr(a.indexOf(f)+f.length);h.hasChildNodes();h.text=c.getAttribute("text");
h.parentNode=this;e.nodes[h.index]=h;h.path=this.path+f+h.id;e.dataSource[a]=c.setAttribute("index_"+e.hashCode,h.index);return h};String.prototype.getAttribute=function(a){if(new RegExp("(^|;)\\s*"+a+"\\s*:\\s*([^;]*)\\s*(;|$)","i").test(this)){return RegExp.$2.replace(/%3B/gi,";").replace(/%25/g,"%")}return null};String.prototype.setAttribute=function(a,b){b=(""+b).replace(/%/g,"%25").replace(/;/g,"%3B").replace(/\r|\n/g,"");return(a+":"+b+";"+this)};String.prototype.deleteAttribute=function(a){return this.replace(new RegExp("\\b\\s*"+a+"\\s*:\\s*([^;]*)\\s*(;|$)","gi"),"")};if(window.opera&&!window.XMLHttpRequest){window.XMLHttpRequest=function(){this.readyState=0;this.status=0;this.statusText="";this._headers=[];this._aborted=false;this._async=true;this._defaultCharset="ISO-8859-1";this._getCharset=function(){var b=_defaultCharset;var a=this.getResponseHeader("Content-type").toUpperCase();val=a.indexOf("CHARSET=");if(val!=-1){b=a.substring(val)}val=b.indexOf(";");if(val!=-1){b=b.substring(0,val)}val=b.indexOf(",");if(val!=-1){b=b.substring(0,val)}return b};this.abort=function(){this._aborted=true};this.getAllResponseHeaders=function(){return this.getAllResponseHeader("*")};this.getAllResponseHeader=function(c){var a="";for(var b=0;b<this._headers.length;b++){if(c=="*"||this._headers[b].h==c){a+=this._headers[b].h+": "+this._headers[b].v+"\n"}}return a};this.getResponseHeader=function(c){var a=getAllResponseHeader(c);var b=a.indexOf("\n");if(b!=-1){a=a.substring(0,b)}return a};this.setRequestHeader=function(b,a){this._headers[this._headers.length]={h:b,v:a}};this.open=function(e,c,d,a,b){this.method=e;this.url=c;this._async=true;this._aborted=false;this._headers=[];if(arguments.length>=3){this._async=d}if(arguments.length>3){opera.postError("XMLHttpRequest.open() - user/password not supported")}this.readyState=1;if(this.onreadystatechange){this.onreadystatechange()}};this.send=function(a){if(!navigator.javaEnabled()){alert("XMLHttpRequest.send() - Java must be installed and enabled.");return}if(this._async){setTimeout(this._sendasync,0,this,a)
}else{this._sendsync(a)}};this._sendasync=function(a,b){if(!a._aborted){a._sendsync(b)}};this._sendsync=function(r){this.readyState=2;if(this.onreadystatechange){this.onreadystatechange()}var f=new java.net.URL(new java.net.URL(window.location.href),this.url);var j=f.openConnection();for(var p=0;p<this._headers.length;p++){j.setRequestProperty(this._headers[p].h,this._headers[p].v)}this._headers=[];if(this.method=="POST"){j.setDoOutput(true);var b=new java.io.OutputStreamWriter(j.getOutputStream(),this._getCharset());b.write(r);b.flush();b.close()}var m=false;var k=false;var e=false;var c=false;var h=false;var q=false;for(var p=0;;p++){var o=j.getHeaderFieldKey(p);var l=j.getHeaderField(p);if(o==null&&l==null){break}if(o!=null){this._headers[this._headers.length]={h:o,v:l};switch(o.toLowerCase()){case"content-encoding":m=true;break;case"content-length":k=true;break;case"content-type":e=true;break;case"date":c=true;break;case"expires":h=true;break;case"last-modified":q=true;break}}}var s;s=j.getContentEncoding();if(s!=null&&!m){this._headers[this._headers.length]={h:"Content-encoding",v:s}}s=j.getContentLength();if(s!=-1&&!k){this._headers[this._headers.length]={h:"Content-length",v:s}}s=j.getContentType();if(s!=null&&!e){this._headers[this._headers.length]={h:"Content-type",v:s}}s=j.getDate();if(s!=0&&!c){this._headers[this._headers.length]={h:"Date",v:(new Date(s)).toUTCString()}}s=j.getExpiration();if(s!=0&&!h){this._headers[this._headers.length]={h:"Expires",v:(new Date(s)).toUTCString()}}s=j.getLastModified();if(s!=0&&!q){this._headers[this._headers.length]={h:"Last-modified",v:(new Date(s)).toUTCString()}}var d="";var g=j.getInputStream();if(g){var a=new java.io.BufferedReader(new java.io.InputStreamReader(g,this._getCharset()));var n;while((n=a.readLine())!=null){if(this.readyState==2){this.readyState=3;if(this.onreadystatechange){this.onreadystatechange()}}d+=n+"\n"}a.close();this.status=200;this.statusText="OK";this.responseText=d;this.readyState=4;if(this.onreadystatechange){this.onreadystatechange()}if(this.onload){this.onload()
}}else{this.status=404;this.statusText="Not Found";this.responseText="";this.readyState=4;if(this.onreadystatechange){this.onreadystatechange()}if(this.onerror){this.onerror()}}}};try{System.xmlHttp=new XMLHttpRequest()}catch(ex){}}function MzXmlDocument(){if(document.implementation&&document.implementation.createDocument){var d=document.implementation.createDocument("","",null);d.addEventListener("load",function(f){this.readyState=4},false);d.readyState=4;return d}else{var c=["MSXML2","Microsoft","MSXML","MSXML3"];for(var a=0;a<c.length;a++){try{return new ActiveXObject(c[a]+".DomDocument")}catch(b){}}throw new Error("Could not find an installed XML parser!")}}MzXmlDocument.Extends(System,"MzXmlDocument");var IE7=false;if(/MSIE (\d+(\.\d+)?)/.test(navigator.userAgent)){IE7=parseFloat(RegExp.$1)>=7}if(System.supportsXmlHttp()&&"undefined"!=typeof XMLDocument&&!IE7){(function(){var b=XMLDocument.prototype;b.__proto__={__proto__:b.__proto__};var a=b.__proto__;a.createNode=function(f,h,g){switch(f){case 1:if(g&&g!=""){return this.createElementNS(g,h)}else{return this.createElement(h)}case 2:if(g&&g!=""){return this.createAttributeNS(g,h)}else{return this.createAttribute(h)}case 3:default:return this.createTextNode("")}};a.__realLoad=b.load;a.load=function(f){this.readyState=0;this.__realLoad(f)};a.loadXML=function(j){var k=(new DOMParser).parseFromString(j,"text/xml");while(this.hasChildNodes()){this.removeChild(this.lastChild)}var h=k.childNodes;var f=h.length;for(var g=0;g<f;g++){this.appendChild(this.importNode(h[g],true))}};a.setProperty=function(j,k){if(j=="SelectionNamespaces"){this._selectionNamespaces={};var h=k.split(/\s+/);var g=/^xmlns\:([^=]+)\=((\"([^\"]*)\")|(\'([^\']*)\'))$/;for(var f=0;f<h.length;f++){g.test(h[f]);this._selectionNamespaces[RegExp.$1]=RegExp.$4||RegExp.$6}}};a.__defineSetter__("onreadystatechange",function(g){if(this._onreadystatechange){this.removeEventListener("load",this._onreadystatechange,false)}this._onreadystatechange=g;if(g){this.addEventListener("load",g,false)}return g});a.__defineGetter__("onreadystatechange",function(){return this._onreadystatechange
});MzXmlDocument._mozHasParseError=function(f){return !f.documentElement||f.documentElement.localName=="parsererror"&&f.documentElement.getAttribute("xmlns")=="http://www.mozilla.org/newlayout/xml/parsererror.xml"};a.__defineGetter__("parseError",function(){var f=MzXmlDocument._mozHasParseError(this);var i={errorCode:0,filepos:0,line:0,linepos:0,reason:"",srcText:"",url:""};if(f){i.errorCode=-1;try{i.srcText=this.getElementsByTagName("sourcetext")[0].firstChild.data;i.srcText=i.srcText.replace(/\n\-\^$/,"")}catch(h){i.srcText=""}try{var k=this.documentElement.firstChild.data;var j=/XML Parsing Error\:(.+)\nLocation\:(.+)\nLine Number(\d+)\,Column(\d+)/;var g=j.exec(k);i.reason=g[1];i.url=g[2];i.line=g[3];i.linepos=g[4]}catch(h){i.reason="Unknown"}}return i});var e=Node.prototype;e.__proto__={__proto__:e.__proto__};a=e.__proto__;a.__defineGetter__("xml",function(){return(new XMLSerializer).serializeToString(this)});a.__defineGetter__("baseName",function(){var f=this.nodeName.split(":");return f[f.length-1]});a.__defineGetter__("text",function(){var h=this.childNodes;var f=h.length;var j=new Array(f);for(var g=0;g<f;g++){j[g]=h[g].text}return j.join("")});a.selectNodes=function(g){var k=this.nodeType==9?this:this.ownerDocument;var j=k.createNSResolver(this.nodeType==9?this.documentElement:this);var f;if(k._selectionNamespaces){f=function(m){if(k._selectionNamespaces[m]){return k._selectionNamespaces[m]}return j.lookupNamespaceURI(m)}}else{f=j}var l=k.evaluate(g,this,f,5,null);var h=[];var i;while((i=l.iterateNext())){h.push(i)}return h};a.selectSingleNode=function(g){var i=this.nodeType==9?this:this.ownerDocument;var h=i.createNSResolver(this.nodeType==9?this.documentElement:this);var f;if(i._selectionNamespaces){f=function(k){if(i._selectionNamespaces[k]){return i._selectionNamespaces[k]}return h.lookupNamespaceURI(k)}}else{f=h}var j=i.evaluate(g,this,f,9,null);return j.singleNodeValue};a.transformNode=function(g){var h=this.nodeType==9?this:this.ownerDocument;var f=new XSLTProcessor();f.importStylesheet(g);var i=f.transformToFragment(this,h);
return i.xml};a.transformNodeToObject=function(j,h){var p=this.nodeType==9?this:this.ownerDocument;var m=h.nodeType==9?h:h.ownerDocument;var f=new XSLTProcessor();f.importStylesheet(j);var o=f.transformToFragment(this,p);while(h.hasChildNodes()){h.removeChild(h.lastChild)}var n=o.childNodes;var g=n.length;for(var k=0;k<g;k++){h.appendChild(m.importNode(n[k],true))}};var c=Attr.prototype;c.__proto__={__proto__:c.__proto__};a=c.__proto__;a.__defineGetter__("xml",function(){var f=(new XMLSerializer).serializeToString(this);return this.nodeName+'="'+f.replace(/\"/g,"&quot;")+'"'});var d=Text.prototype;d.__proto__={__proto__:d.__proto__};a=d.__proto__;a.__defineGetter__("text",function(){return this.nodeValue})})()};