function MzTreeView(a){MzData.call(this);this.index=this.hashCode;this.dataSource=a}t=MzTreeView.Extends(MzData,"MzTreeView");MzTreeView.addProperty("defaultUrl","javascript:");MzTreeView.addProperty("defaultTarget","_self");t.iconPath=System.path+"/images/";t.showPlus=true;t.showRoot=true;t.showLines=true;t.showToolTip=true;t.showNodeIcon=true;t.autoSort=true;t.useArrow=true;t.dynamic=false;t.useCheckbox=false;t.isParentCheckbox=false;t.autoFocused=false;t.useContextMenu=false;t.convertRootIcon=true;t.canOperate=false;t.linkFocus=true;t.linkCheckbox=true;MzTreeView.icons={line:{l0:"_line0.gif",l1:"_line1.gif",l2:"_line2.gif",l3:"_line3.gif",l4:"_line4.gif",ll:"_line5.gif",c0:"_checkbox0.gif",c1:"_checkbox1.gif",c2:"_checkbox2.gif"},collapse:{pm0:"_plus0.gif",pm1:"_plus1.gif",pm2:"_plus2.gif",pm3:"_plus3.gif",root:"root_1.gif",file:"file_1.gif",exit:"exit.gif",folder:"folder_1.gif"},expand:{pm0:"_minus0.gif",pm1:"_minus1.gif",pm2:"_minus2.gif",pm3:"_minus3.gif",folder:"folderopen_1.gif"}};MzTreeView.textLoading="&#27491;&#22312;&#21152;&#36733;...";MzTreeView.prototype.render=function(){function f(m){for(var l in m){if("string"==typeof m[l]){var c=new Image();c.src=g.iconPath+m[l];m[l]=c}}}var g=this;f(MzTreeView.icons.expand);f(MzTreeView.icons.collapse);f(MzTreeView.icons.line);g.firstNode=null;this.initialize();var j="无数据",e,d=this.rootNode;if(d.hasChild){var b=[],k=d.childNodes;g.firstNode=k[0];for(e=0;e<k.length;e++){b[e]=k[e].render(e==k.length-1)}j=b.join("")}setTimeout(function(){g.afterRender()},10);if(this.autoFocused){var h=new MzCookie().get("MzTreeViewSelectedNodePath");if(h&&h.length>0){this.focusNodeByPath(h)}}return"<div class='mztreeview' id='MTV_root_"+this.index+"' onclick='Instance(\""+this.index+"\").clickHandle(event)' ondblclick='Instance(\""+this.index+"\").dblClickHandle(event)' >"+j+"</div>"};MzTreeView.prototype.afterRender=function(){var b=this;var a=document.getElementById("MTV_root_"+b.index);if(a){if(b.firstNode){(b.currentNode=b.firstNode).focus()}this.dispatchEvent(new System.Event("onrender"));
if(b.useArrow){b.attachEventArrow()}if(!b.showRoot){try{a.childNodes[0].childNodes[0].style.display="none"}catch(c){}}}else{setTimeout(function(){b.afterRender()},100)}};MzTreeView.prototype.attachEventArrow=function(){var b=document.getElementById("MTV_root_"+this.index);if(!b){return}var c=this;b.attachEvent("onkeydown",function(d){d=window.event||d;var a=d.keyCode||d.which;switch(a){case 37:c.focusUpperNode();break;case 38:c.focusPreviousSibling();break;case 39:c.focusLowerNode();break;case 40:c.focusNextSibling();break;case 46:if(c.canOperate){c.currentNode.removeNode()}break}})};MzTreeView.prototype.appendIcon=function(d,e,c){if(/^pm\d$/.test(d)){return}var b=new Image();b.src=e;if(c){MzTreeView.icons.expand[d]=b;return}MzTreeView.icons.collapse[d]=b};MzTreeView.prototype.setIconPath=function(a){if(a.length>0){this.iconPath=a.replace(/[\\\/]*$/,"/")}};MzTreeView.prototype.loadChildNodes=function(b){var a;if(a=this.getNodeById(b)){a.loadChildNodes()}};MzTreeView.prototype.buildPrefix=function(d){var b=d.replace(/^,+/,"").split(",");for(var c=0;c<b.length;c++){if(b[c]){b[c]="<img src='"+MzTreeView.icons.line[b[c]].src+"' alt='' />"}}return this.showLines?(d?b.join(""):""):(d?"<div style='width:"+(MzTreeView.icons.collapse.pm3.width*b.length)+"px'>&nbsp;</div>":"")};MzTreeView.prototype.expand=function(b){var a;if(a=this.getNodeById(b)){a.expand()}};MzTreeView.prototype.collapse=function(b){var a;if(a=this.getNodeById(b)){a.collapse()}};MzTreeView.prototype.clickHandle=function(a){a=window.event||a;var c;a=a.srcElement||a.target;if(a.tagName=="A"){a=a.parentNode.firstChild}if(c=(a.id&&0==a.id.indexOf(this.index+"_"))){var b=this.currentNode=this.nodes[a.id.substr(a.id.lastIndexOf("_")+1)]}switch(a.tagName){case"IMG":if(c){if(a.id.indexOf(this.index+"_expand_")==0){b.expanded?b.collapse():b.expand()}else{if(a.id.indexOf(this.index+"_icon_")==0){}else{if(a.id.indexOf(this.index+"_checkbox_")==0){b.check(!b.checked);b.upCheck()}}}}break;case"A":if(c){if(this.linkFocus){b.focus()}if(this.linkCheckbox){b.check(!b.checked);
b.upCheck()}this.dispatchEvent(new System.Event("onclick"))}break;default:if(System.ns){a=a.parentNode}break}};MzTreeView.prototype.dblClickHandle=function(a){a=window.event||a;a=a.srcElement||a.target;if(a.id.indexOf(this.index+"_icon_")==0){a=this.nodes[a.id.substr(a.id.lastIndexOf("_")+1)];a.expanded?a.collapse():a.expand();this.currentNode=a;this.dispatchEvent(new System.Event("ondblclick"))}};MzTreeView.prototype.focus=function(b){if(!this.selectedNode){this.selectedNode=this.rootNode}var a;if(a=this.getNodeById(b)){a.focus()}};MzTreeView.prototype.focusNodeByPath=function(c){if(c.substring(c.length-1,c.length)==this.divider){c=c.substring(0,c.length-1)}var b=this,d;if((d=c.indexOf(this.divider))>0){var a=this.getNodeById(c.substring(0,d));if(a){if(a!=this.rootNode&&!a.expanded){a.expand()}a.focus()}else{return}c=c.substr(d+this.divider.length);setTimeout(function(){b.focusNodeByPath(c)},1)}else{d=this.getNodeById(c);if(d){d.focus();d.expand()}}};MzTreeView.prototype.focusUpperNode=function(){var b=this.selectedNode,a=this.rootNode;if(b){if(b.parentNode==a&&!b.expanded){return}if(b.expanded){b.collapse()}else{b.parentNode.focus()}}};MzTreeView.prototype.focusLowerNode=function(){var a=this.selectedNode;if(a&&a.hasChild){if(a.expanded){a.childNodes[0].focus()}else{a.expand()}}};MzTreeView.prototype.focusPreviousSibling=function(){var b=this.selectedNode;if(b&&b.parentNode){var d=b.parentNode.childNodes;for(var a=d.length-1;a>=0;a--){if(d[a]==b){if(a==0){return}d[a-1].focus()}}}};MzTreeView.prototype.focusNextSibling=function(){var b=this.selectedNode;if(b&&b.parentNode){var d=b.parentNode.childNodes;for(var a=0;a<d.length;a++){if(d[a]==b){if(a==d.length-1){return}d[a+1].focus()}}}};MzTreeView.prototype.appendNode=function(b,f){if(!this.canOperate){return}var c=b.split(this.divider);if(c.length!=2){return}var h={},e=c[0],i=c[1];h[b]=f;this.appendData(h);var g=this.getNodeById(e);if(!g){return}g.hasChild=true;if(!g.isLoaded){g.updateNode();g.expand()}else{g.appendNode(g.DTO(this.nodePrototype,b))}this.currentNode=this.getNodeById(i);
this.dispatchEvent(new System.Event("onappendnode"));if(this.useCheckbox&&g.checked){g.check(true)}};MzTreeView.prototype.updateNode=function(b){if(!this.canOperate){return}var a;if(a=this.getNodeById(b)){a.updateNode()}};MzTreeView.prototype.removeNode=function(b){if(!this.canOperate){return}var a;if(a=this.getNodeById(b)){a.removeNode()}};MzTreeView.prototype.getChecked=function(){var c="",a=this.nodes;for(var b in a){if(a[b].checked){if(/^\d+$/.test(a[b].id)){c+=a[b].id+","}}}return c};MzTreeView.prototype.getCheckedText=function(){var c="",a=this.nodes;for(var b in a){if(a[b].checked){if(/^\d+$/.test(a[b].id)){c+=a[b].text+","}}}return c};MzTreeView.prototype.expandAll=function(b){if("undefined"==typeof b){return}var a=this.getNodeById(b);if(!a||a.hasChlid){return}a.expandAll()};MzTreeView.prototype.collapseAll=function(b){if("undefined"==typeof b){return}var a=this.getNodeById(b);if(!a||a.childNodes.length==0){return}a.collapseAll()};MzTreeView.prototype.expandLevel=function(d){if(!/\d+/.test(d)||d==0){return}var b;if((b=this.rootNode).hasChild){for(var a=0,c=b.childNodes.length;a<c;a++){b.childNodes[a].expandLevel(d)}}};window.MzTreeNode=function(){MzDataNode.call(this)};t=MzTreeNode.Extends(MzDataNode,"MzTreeNode");MzTreeView.prototype.nodePrototype=MzTreeNode;MzTreeNode.htmlChildPrefix="";t.checked=t.expanded=false;t.childPrefix="";MzTreeNode.prototype.loadChildNodes=function(){MzDataNode.prototype.loadChildNodes.call(this,MzTreeNode);if(this.$$caller.useCheckbox){var e=/^true$/i,f=this.$$caller.dataSource;for(var c=0,g=this.childNodes.length;c<g;c++){var d=this.childNodes[c];var a=f[d.sourceIndex].getAttribute("checked");if(a!=null){d.checked=e.test(a)}if(!this.$$caller.isParentCheckbox){d.checked=d.parentNode.checked||d.checked}}if(g>0){this.childNodes[0].upCheck()}}};MzTreeNode.prototype.render=function(i){var e=this.$$caller,j=e.dataSource[this.sourceIndex],g,f,a;var h=j.getAttribute("icon");if(!(g=j.getAttribute("target"))){g=e.getDefaultTarget()}var d=e.showToolTip?j.getAttribute("hint")||this.text:"";
if(!(a=j.getAttribute("url"))){a=e.getDefaultUrl()}if(f=j.getAttribute("data")){a+=(a.indexOf("?")==-1?"?":"&")+f}var b=this.index,j="";var c=this.parentNode==e.rootNode;if(c&&e.convertRootIcon&&!h){h="root"}if(!c){this.childPrefix=this.parentNode.childPrefix+(i?",ll":",l4")}if(!h||typeof(MzTreeView.icons.collapse[h])=="undefined"){this.icon=this.hasChild?"folder":"file"}else{this.icon=h}this.line=this.hasChild?(i?"pm2":"pm1"):(i?"l2":"l1");if(!e.showLines){this.line=this.hasChild?"pm3":"ll"}j+="<div><table border='0' cellpadding='0' cellspacing='0'><tr title='"+d+"'><td nowrap='true'>";if(!c&&MzTreeNode.htmlChildPrefix){j+=MzTreeNode.htmlChildPrefix+"</td><td nowrap='true'>"}if(!c){j+="<img border='0' id='"+e.index+"_expand_"+b+"' src='"+(this.hasChild?MzTreeView.icons.collapse[this.line].src:MzTreeView.icons.line[this.line].src)+"'>"}if(e.showNodeIcon){j+="<img border='0' id='"+e.index+"_icon_"+b+"' src='"+MzTreeView.icons.collapse[this.icon].src+"'>"}if(e.useCheckbox){j+="<img border='0' id='"+e.index+"_checkbox_"+b+"' src='"+MzTreeView.icons.line["c"+(this.checked?1:0)].src+"'>"}j+="</td><td style='padding-left: 3px' nowrap='true'><a href='"+a+"' target='"+g+"' id='"+e.index+"_link_"+b+"' class='MzTreeView'>"+this.text+"</a></td></tr></table><div ";if(c&&this.text==""){j="<div><div "}j+="id='"+e.index+"_tree_"+b+"' style='display:none;'></div></div>";return j};MzTreeNode.prototype.buildChildNodes=function(){var f=this,g=f.$$caller,e;if(e=document.getElementById(g.index+"_tree_"+f.index)){var b=new Array(f.childNodes.length);MzTreeNode.htmlChildPrefix=g.buildPrefix(f.childPrefix);if(/(^|\s|;)(JS|XML|UL)Data\s*:/i.test(g.dataSource[f.sourceIndex])){function d(i,h){if(i.hasChild!=h.hasChild){return(i.hasChild?-1:1)}else{return(i.index>h.index?1:-1)}}if(g.autoSort){f.childNodes=f.childNodes.sort(d)}}for(var c=0;c<b.length;c++){b[c]=f.childNodes[c].render(c==b.length-1)}e.innerHTML=b.join("");if(e.innerHTML==""){e.style.display="none"}b=null;if(!g.isParentCheckbox&&f.checked){f.check(f.checked)}}};MzTreeNode.prototype.check=function(e){var d=this,f=d.$$caller,h=e?"true":"false",g=d.childNodes;
var b;if(b=document.getElementById(f.index+"_checkbox_"+d.index)){b.src=MzTreeView.icons.line["c"+((d.checked=(e==true))?1:0)].src}var a=f.index;for(var c=0,b=g.length;c<b;c++){setTimeout("Instance('"+a+"').nodes['"+g[c].index+"'].check("+h+")",1)}};MzTreeNode.prototype.upCheck=function(){var c=this,d=c.$$caller,a;if(c.parentNode){for(var b=0;b<c.parentNode.childNodes.length;b++){if(c.parentNode.childNodes[b].checked!=c.checked){while(c=c.parentNode){c.checked=d.isParentCheckbox;if(a=document.getElementById(d.index+"_checkbox_"+c.index)){a.src=MzTreeView.icons.line.c2.src}}return}}c=c.parentNode;c.checked=this.checked;if(a=document.getElementById(d.index+"_checkbox_"+c.index)){a.src=MzTreeView.icons.line["c"+(c.checked?1:0)].src}c.upCheck()}};MzTreeNode.prototype.expand=function(){if(!this.hasChild){return}var f=this,h=f.$$caller;var e=document.getElementById(h.index+"_tree_"+this.index);if(!e){System._alert("error in getElementById");return}this.expanded=e.style.display=="none";e.style.display="block";if(h.dynamic){MzEffect.show(e)}var a=document.getElementById(h.index+"_expand_"+this.index);var c=document.getElementById(h.index+"_icon_"+this.index);var g=MzTreeView.icons.expand,b=MzTreeView.icons.collapse;if(a&&typeof(g[this.line])=="object"){a.src=g[this.line].src}if(c&&typeof(g[this.icon])=="object"){c.src=g[this.icon].src}if(!this.isLoaded){if(this.hasChild&&(this.childNodes.length>200||/(^|\s|;)(JS|XML|UL)Data\s*:/i.test(h.dataSource[this.sourceIndex]))){setTimeout(function(){f.loadChildNodes();f.buildChildNodes()},1);e.innerHTML="<table border='0' cellspacing='0' cellpadding='0'><tr><td>"+h.buildPrefix(this.childPrefix)+"</td><td><img border='0' src='"+b.pm2.src+"'>"+(!h.showNodeIcon?"":"<img border='0' src='"+b.folder.src+"'>")+"<a class='selected' href='javascript:'>"+MzTreeView.textLoading+"</a></td></tr></table>"}else{this.loadChildNodes();this.buildChildNodes()}}else{if(e.innerHTML==""){e.style.display="none"}}h.currentNode=this;h.dispatchEvent(new System.Event("onexpand"));if(this.parentNode==h.rootNode){if(this.text==""&&this.hasChild){var d=this.childNodes[0];
a=document.getElementById(h.index+"_expand_"+d.index);if(d.line.indexOf("pm")==0){if(d.line=="pm1"){d.line="pm0"}else{if(d.line=="pm2"){d.line="pm3"}}a.src=b[d.line].src}else{if(d.line=="l1"){d.line="l0"}else{if(d.line=="l2"){d.line="l3"}}a.src=MzTreeView.icons.line[d.line].src}}}};MzTreeNode.prototype.expandAll=function(){if(this.hasChild&&!this.expanded){this.expand()}for(var a=this.$$caller.index,b=0;b<this.childNodes.length;b++){var c=this.childNodes[b];if(c.hasChild){setTimeout("Instance('"+a+"').nodes['"+c.index+"'].expandAll()",1)}}};MzTreeNode.prototype.expandLevel=function(h){if(h<=0){return}h--;var e=this;if(this.hasChild&&!this.expanded){this.expand()}for(var a=this.$$caller.index,b=0,g=this.childNodes.length;b<g;b++){var c=this.childNodes[b],f=c.index;if(c.hasChild){setTimeout("Instance('"+a+"').nodes['"+f+"'].expandLevel("+h+")",1)}}};MzTreeNode.prototype.collapse=function(){var d=this.$$caller;var c=document.getElementById(d.index+"_tree_"+this.index);if(!c){System._alert("error in getElementByid");return}var a=document.getElementById(d.index+"_expand_"+this.index);var b=document.getElementById(d.index+"_icon_"+this.index);if(d.dynamic){MzEffect.hide(c)}else{c.style.display="none"}c=MzTreeView.icons.collapse;if(a){a.src=c[this.line].src}this.expanded=false;if(b){b.src=(c[this.icon]||c.file).src}d.currentNode=this;d.dispatchEvent(new System.Event("oncollapse"))};MzTreeNode.prototype.collapseAll=function(){if(this.hasChild&&this.expanded){this.collapse()}for(var a=this.$$caller.index,b=0;b<this.childNodes.length;b++){var c=this.childNodes[b];if(c.hasChild&&c.isLoaded){setTimeout("Instance('"+a+"').nodes['"+c.index+"'].collapseAll()",1)}}};MzTreeNode.prototype.focus=function(){var c=this.$$caller,b=c.rootNode,d;if(!c.selectedNode){c.selectedNode=b}if(b=document.getElementById(c.index+"_link_"+this.index)){if(d=document.getElementById(c.index+"_link_"+c.selectedNode.index)){d.className=""}b.className="selected";if(c.autoFocused){new MzCookie().add("MzTreeViewSelectedNodePath",this.path)}c.selectedNode=this;
c.currentNode=this;c.dispatchEvent(new System.Event("onfocus"))}};MzTreeNode.prototype.appendNode=function(a){var b=this.$$caller;if(!b.canOperate){return}if(this.hasChild&&!this.isLoaded){this.expand();return}this.childNodes.push(a);this.hasChild=this.isLoaded=true;var e=document.getElementById(b.index+"_tree_"+this.index);if(e.insertAdjacentHTML){e.insertAdjacentHTML("beforeEnd",a.render(true))}else{var c=document.createElement("DIV");c.innerHTML=a.render(true);e.appendChild(c);e.insertBefore(c.firstChild,c);e.removeChild(c)}if(this.childNodes.length>1){this.childNodes[this.childNodes.length-2].updateNodeLine()}else{this.updateNodeLine();this.updateNodeIcon()}this.expand();this.expanded=true};MzTreeNode.prototype.updateNode=function(){var a=this.$$caller;if(!a.canOperate){return}a.currentNode=this;var b=new System.Event("onupdatenode");a.dispatchEvent(b);if(!b.returnValue){return}this.updateNodeLine();this.updateNodeIcon();this.updateNodeLink()};MzTreeNode.prototype.updateNodeLine=function(){var e=this.$$caller,f=this.parentNode.childNodes;this.hasChild=this.isLoaded?this.childNodes.length>0:this.hasChildNodes();var c=document.getElementById(e.index+"_expand_"+this.index);if(c){var d=MzTreeView.icons;if(e.showLines){var a=f.indexOf(this)==(f.length-1);if(a){this.line=this.hasChild?"pm2":"l2"}else{this.line=this.hasChild?"pm1":"l1"}}else{this.line=this.hasChild?"pm3":"ll"}d=this.hasChild?(this.expanded?d.expand:d.collapse):d.line;c.src=d[this.line].src}};MzTreeNode.prototype.updateNodeIcon=function(){var d=this.$$caller;this.hasChild=this.isLoaded?this.childNodes.length>0:this.hasChildNodes();if(d.showNodeIcon){var b=document.getElementById(d.index+"_icon_"+this.index);var c=this.$$caller.dataSource[this.sourceIndex].getAttribute("icon");if(c!="folder"&&c!="file"&&(this.icon=="folder"||this.icon=="file")){this.icon=this.hasChild?"folder":"file"}var a=MzTreeView.icons;c="undefined"==typeof a.expand[this.icon];if(this.expanded){a=c?a.collapse:a.expand;b.src=a[this.icon].src}else{b.src=MzTreeView.icons.collapse[this.icon].src
}}};MzTreeNode.prototype.updateNodeText=function(){document.getElementById(this.$$caller.index+"_link_"+this.index).innerHTML=this.text};MzTreeNode.prototype.updateNodeLink=function(){var e=this.$$caller;var d=document.getElementById(e.index+"_link_"+this.index);var c=e.dataSource[this.sourceIndex],f,a;var b=e.selectedNode==this?"selected":"MzTreeView";if(!(f=c.getAttribute("target"))){f=e.getDefaultTarget()}if(!(a=c.getAttribute("url"))){a=e.getDefaultUrl()}if(e.showToolTip){searchByTagName(d,"TR").title=c.getAttribute("hint")||this.text}if(data=c.getAttribute("data")){a+=(a.indexOf("?")==-1?"?":"&")+data}c="<a target='"+f+"' id='"+e.index+"_link_"+this.index+"' href='"+a+"' class='"+b+"'>"+this.text+"</a>";d.parentNode.innerHTML=c};MzTreeNode.prototype.removeNode=function(){var e=this.$$caller;if(!e.canOperate){return}e.currentNode=this;var c=new System.Event("onremovenode");e.dispatchEvent(c);if(!c.returnValue){return}if(this.parentNode){var j=document.getElementById(e.index+"_tree_"+this.index).parentNode;e.indexes=e.indexes.replace(e.get__()+this.sourceIndex,"");var g=this.parentNode,f=g.childNodes,h=f.indexOf(this),b=[];for(var d=0;d<f.length;d++){if(d==h){continue}b.push(f[d])}g.childNodes=b;f=e.dataSource[this.sourceIndex];e.dataSource[this.sourceIndex]=f.deleteAttribute("index_"+e.index);if(b.length==0){g.collapse();g.updateNode();MzEffect.hide(j.parentNode)}else{if(h==b.length){b[b.length-1].updateNode()}}f=b=null;j.parentNode.removeChild(j);g.focus()}};t=[];t.push("<table border='0' cellspacing='1' id='MzTreeInputer' widht='100%'>");t.push("<colgroup><col class='caption'/><col class='content' /></colgroup>");t.push("<tr><td>&#33410;&#28857;ID</td><td><input class='text' id='mtinputerId' maxlength='16'/></td></tr>");t.push("<tr><td>&#29238;&#33410;&#28857;ID</td><td><input class='text' id='mtinputerParentId' maxlength='16'/></td></tr>");t.push("<tr><td>&#33410;&#28857;&#25991;&#23383;</td><td><input class='text' id='mtinputerText' maxlength='64'/></td></tr>");t.push("<tr><td>&nbsp;</td><td id='mtinputeroption' onclick='MzTreeView.inputerhs(this)'>&#20854;&#23427;&#36873;&#39033; &gt;&gt;&gt;</td></tr>");
t.push("<tr style='display: none'><td>&#33410;&#28857;&#22270;&#26631;</td><td><select id='mtinputerIcon'><option value=''>&#35831;&#36873;&#25321;</option></select></td></tr>");t.push("<tr style='display: none'><td>&#33410;&#28857;&#38142;&#25509;</td><td><input class='text' maxlength='128' id='mtinputerUrl'/></td></tr>");t.push("<tr style='display: none'><td>Target</td><td><input class='text' id='mtinputerTarget' maxlength='32'/></td></tr>");t.push("<tr style='display: none'><td>&#25552;&#31034;&#20449;&#24687;</td><td><input class='text' maxlength='64' id='mtinputerHint'/></td></tr>");t.push("<tr style='display: none'><td>&#38468;&#21152;&#25968;&#25454;</td><td><input class='text' maxlength='255' id='mtinputerData' title='key=value&key=value&key=value&...'/></td></tr>");t.push("<tr style='display: none'><td>&#36873;&#20013;&#29366;&#24577;</td><td><input type='checkbox' id='mtinputerCheck'/></td></tr>");t.push("<tr><td><input class='button' type='button' value='&#30830;&#23450;' /></td><td><input class='button' type='button' value='&#21462;&#28040;' /></td></tr>");MzTreeView.htmlInputer=t.join("")+"</table>";MzTreeView.inputerhs=function(e){var d=searchByTagName(e,"TABLE");var a=d.rows[e.parentNode.rowIndex+1].style.display=="none";for(var c=e.parentNode.rowIndex+1;c<d.rows.length-1;c++){a?MzEffect.show(d.rows[c]):MzEffect.hide(d.rows[c])}d=e.innerHTML;e.innerHTML=d.substring(0,d.indexOf(" "))+" "+(a?"&lt;&lt;&lt;":"&gt;&gt;&gt;");d=document.getElementById("mtinputerIcon");a?MzEffect.show(d):MzEffect.hide(d)};MzTreeView.hideInputer=function(){var a=document.getElementById("MzTreeInputer");a.parentNode.removeChild(a)};MzTreeView.prototype.showInputer=function(){var a=document.createElement("DIV");a.style.width="100%";MzEffect.show(a);a.innerHTML=MzTreeView.htmlInputer;document.body.appendChild(a);var c=document.getElementById("mtinputerIcon");c.options.length=1;for(var b in MzTreeView.icons.collapse){if(!/^pm\d$/.test(b)){c.options[c.options.length]=new Option(b,b,true,true)}}c.selectedIndex=0};function MzEffect(){this.element=MzEffect.check(arguments[0]);
if(!this.element){return}this.attributeName="att_"+this._className.replace(/\W/g,"_");this.terminative=false;this.options=System.incorporate({interval:10,duration:800,increased:true,continual:true},arguments[1]||{});if(this.initialize){this.initialize()}this.beginTime=new Date().getTime();this.endTime=this.beginTime+this.options.duration;if(this.options.onbeforestart){this.options.onbeforestart(this)}if(this.options.continual){this._process()}else{if(!this.virgin){this.restore=function(){alert(this+".restore() is unconsummated!")};this.dispose()}}}t=MzEffect.Extends(System,"MzEffect");t._process=function(){var a=new Date().getTime(),b=this,d=this.options;if(a>=this.endTime){this.render((d.increased===true?1:0));if(this.finish){this.finish()}if(d.onafterfinish){d.onafterfinish(this)}this.dispose();return}var c=(a-this.beginTime)/d.duration;if(d.increased!==true){c=1-c}if(d.onbeforeupdate){d.onbeforeupdate(this)}if(this.render){this.render(c)}if(d.onafterupdate){d.onafterupdate(this)}if(!this.terminative){this.timer=setTimeout(function(){b._process()},d.interval)}else{this.element.removeAttribute(this.attributeName)}};t.cancel=function(){if(this.timer){clearTimeout(this.timer)}};t.dispose=function(){this.element.removeAttribute(this.attributeName);delete this.timer;delete this.element;delete this.options;delete this.endTime;delete this.beginTime;delete this.terminative;delete this.attributeName};MzEffect.check=function(a){if("object"==typeof a&&!a.tagName){return null}if("string"==typeof a&&!(a=document.getElementById(a))){return null}return a};MzEffect.hide=function(){for(var b=null,c=arguments.length,a=0;a<c;a++){if(b=MzEffect.check(arguments[a])){if(System.ie&&!b.style.width&&!b.style.height){b.style.display="none"}else{new MzEffect.Opacity(b,{increased:false,duration:200,onafterfinish:function(d){d.element.style.display="none";d.restore()}})}}}};MzEffect.show=function(){for(var b=null,c=arguments.length,a=0;a<c;a++){if(b=MzEffect.check(arguments[a])){b.style.display="";if(System.ie&&!b.style.width&&!b.style.height){return
}new MzEffect.Opacity(b,{duration:360})}}};MzEffect.Combo=function(a,b){this.effects=a||[];if(this.effects.length==0){return}MzEffect.apply(this,[this.effects[0].element,b])};t=MzEffect.Combo.Extends(MzEffect,"MzEffect.Combo");t.render=function(b){for(var a=0;a<this.effects.length;a++){this.effects[a].cancel();this.effects[a].render(b)}};t.finish=function(){for(var a=0;a<this.effects.length;a++){if(this.effects[a].finish){this.effects[a].finish()}this.effects[a].dispose()}};t.dispose=function(){MzEffect.prototype.dispose.call(this);delete this.effects};MzEffect.Opacity=function(a,b){MzEffect.apply(this,arguments)};MzEffect.Opacity.Extends(MzEffect,"MzEffect.Opacity").initialize=function(){var b=this.options,a=this.element;this.restore=function(){if(!System.ie){a.style.opacity=b.Effect_opacity;a.style.MozOpacity=b.Effect_MozOpacity;a.style.KHTMLOpacity=b.Effect_KHTMLOpacity}else{a.style.filter=b.Effect_filter}};this.setOpacity=function(c){this.render(c)};this.render=function(c){if(!System.ie){a.style.opacity=c;a.style.MozOpacity=c;a.style.KHTMLOpacity=c}else{a.style.filter="alpha(opacity:"+Math.round(c*100)+")"}};if(System.ie){b.Effect_filter=a.style.filter}else{b.Effect_opacity=a.style.opacity;b.Effect_MozOpacity=a.style.MozOpacity;b.Effect_KHTMLOpacity=a.style.KHTMLOpacity}};MzEffect.MoveBy=function(b,a,d,c){this.endpointX=a;this.endpointY=d;MzEffect.apply(this,[b,c])};MzEffect.MoveBy.Extends(MzEffect,"MzEffect.MoveBy").initialize=function(){var a=this.element,b=this.options;b.Effect_top=a.style.top;b.Effect_left=a.style.left;b.Effect_position=a.style.position;this.render=function(d){var c=this.endpointY*d+this.originalY;var e=this.endpointX*d+this.originalX;this.setPosition(c,e)};this.setPosition=function(c,d){a.style.top=d+"px";a.style.left=c+"px"};this.restore=function(){a.style.top=b.Effect_top;a.style.left=b.Effect_left;a.style.position=b.Effect_position};this.originalY=parseFloat(a.style.top||"0");this.originalX=parseFloat(a.style.left||"0");if(a.style.position==""){a.style.position="relative"}};function n2h(a){a=parseInt(a).toString(16);
return("00"+a).substr(a.length)}MzEffect.Glittery=function(a,b){MzEffect.apply(this,arguments)};MzEffect.Glittery.Extends(MzEffect,"MzEffect.Glittery").initialize=function(){var f=this.options,e=this.element,c="#FFFFFF";var a=(e.currentStyle||e.style).backgroundColor;if(a){if(/^\#[\da-z]{6}$/i.test(a)){c=a}if(a.indexOf("rgb(")==0){var d=a.substring(4,a.length-1).split(",");for(var b=0,c="#";b<d.length;b++){c+=n2h(d[b])}}}f.beginColor=f.beginColor||"#FFFF00";f.endColor=f.endColor||c;f.finalColor=f.finalColor||e.style.backgroundColor;this.colors_base=[parseInt(f.beginColor.substring(1,3),16),parseInt(f.beginColor.substring(3,5),16),parseInt(f.beginColor.substr(5),16)];this.colors_var=[parseInt(f.endColor.substring(1,3),16)-this.colors_base[0],parseInt(f.endColor.substring(3,5),16)-this.colors_base[1],parseInt(f.endColor.substr(5),16)-this.colors_base[2]];this.finish=function(){e.style.backgroundColor=f.finalColor};this.render=function(h){var g=[n2h(Math.round(this.colors_base[0]+(this.colors_var[0]*h))),n2h(Math.round(this.colors_base[1]+(this.colors_var[1]*h))),n2h(Math.round(this.colors_base[2]+(this.colors_var[2]*h)))];e.style.backgroundColor="#"+g.join("")};this.dispose=function(){MzEffect.prototype.dispose.call(this);delete this.colors_base;delete this.colors_var}};